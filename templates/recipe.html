{% extends "layout.html" %}

{% block content %}

  <h2>{{ recipe.title }}</h2>

  {% if session.username == recipe.username %}
    <p>
      Oma reseptisi (<a href="/edit_recipe/{{ recipe.id }}">muokkaa</a> | <a href="/delete_recipe/{{ recipe.id }}">poista)</a>
    </p>
  {% else %}
    <p>Lisännyt <a href="/user/{{ recipe.user_id }}">{{ recipe.username }}</a>.</p>
  {% endif %}

  <h3>Resepti</h3>

  <p>
    Ainekset
    <ul>
      {% for ingredient in ingredients %}
        <li>
          {{ ingredient[0] }}
        </li>
      {% endfor %}
    </ul>
  </p>

  <p>
    Ohje
    <ol>
      {% for instruction in instructions %}
        <li>
          {{ instruction[0] }}
        </li>
      {% endfor %}    
    </ol>
  </p>

  <h3>Kommentit</h3>

  <p>
    <ul>
      {% for comment in comments %}
        <li>
          "{{ comment.comment }}" (<a href="/user/{{ comment.user_id }}">{{ comment.username }}</a>)
        </li>
      {% endfor %}
    </ul>
  </p>
  
  {% if session.username %}
  <form action="/recipe/{{ recipe.id }}" method="POST">
    <p>
      Lisää kommentti:<br>
      <input type="text" name="comment" />
      <input type="submit" value="Lähetä" />
    </p>
  </form>
  {% else %}
    <p><a href="/login">Kirjaudu sisään</a> voidaksesi kommentoida.</p>
  {% endif %}

{% endblock %}
